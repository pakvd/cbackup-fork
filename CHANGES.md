# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û—à–∏–±–∫–∞ "Unable to determine the request URI"
**–§–∞–π–ª**: `core/behaviors/MaintenanceBehavior.php`
- **–ü—Ä–æ–±–ª–µ–º–∞**: MaintenanceBehavior –≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–ª—É—á–∏—Ç—å URL –¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Request
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω –ø–æ–¥—Ö–æ–¥ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `EVENT_BEFORE_REQUEST` –≤–º–µ—Å—Ç–æ `init()`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `pathInfo` –≤–º–µ—Å—Ç–æ `url` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –≤—ã–∑–æ–≤–∞ `resolveRequestUri()`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 2. –û—à–∏–±–∫–∞ "Class 'yii\db\mysql\Schema' not found"
**–§–∞–π–ª—ã**: `core/config/db.php`, `core/composer.json`
- **–ü—Ä–æ–±–ª–µ–º–∞**: MysqlSchema –∑–∞–≥—Ä—É–∂–∞–ª—Å—è —á–µ—Ä–µ–∑ `require_once` –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ Yii2
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–Ω `require_once`, –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `autoload` –≤ `composer.json` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ Composer
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 3. –û—à–∏–±–∫–∞ "Undefined array key 'constraint_name'"
**–§–∞–π–ª—ã**: `core/components/MysqlSchema.php`, `core/config/db.php`
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Yii2 2.0.14 —Å MySQL 8.0 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–ª–∞—Å—Å `MysqlSchema` –∫–æ—Ç–æ—Ä—ã–π –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ `constraint_name` –≤ `information_schema`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 4. –û—à–∏–±–∫–∞ 500 –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è (HTMLPurifier)
**–§–∞–π–ª—ã**: `core/composer.json`, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–ü—Ä–æ–±–ª–µ–º–∞**: HTMLPurifier v4.10.0 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —É—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å PHP (—Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏), –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –≤ PHP 8.1
- **–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω HTMLPurifier –¥–æ –≤–µ—Ä—Å–∏–∏ 4.19.0, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π —Å PHP 8.1
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 5. –û—à–∏–±–∫–∞ "Failed to open stream: vendor/autoload.php"
**–§–∞–π–ª—ã**: `core/Dockerfile`, `core/docker-entrypoint.sh`
- **–ü—Ä–æ–±–ª–µ–º–∞**: Volume mount –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª `vendor` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω entrypoint —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 6. –û—à–∏–±–∫–∞ "Permission denied" –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ install.lock
**–§–∞–π–ª—ã**: `core/web/install/index.php`, `core/web/index.php`, `core/models/Install.php`
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π volume mount
- **–†–µ—à–µ–Ω–∏–µ**: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è `install.lock` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `runtime`, –µ—Å–ª–∏ –∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 7. –û—à–∏–±–∫–∞ "504 Gateway Time-out"
**–§–∞–π–ª—ã**: `core/Dockerfile`, `core/docker-entrypoint.sh`
- **–ü—Ä–æ–±–ª–µ–º–∞**: PHP-FPM –¥–æ—Å—Ç–∏–≥–∞–ª –ª–∏–º–∏—Ç–∞ `pm.max_children` (5 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
- **–†–µ—à–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–µ–Ω `pm.max_children` –¥–æ 20, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PHP-FPM –ø—É–ª–∞
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 8. –û—à–∏–±–∫–∞ "Database error: Access denied"
**–§–∞–π–ª**: `core/config/db.php`
- **–ü—Ä–æ–±–ª–µ–º–∞**: –•–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å docker-compose.yml
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —á—Ç–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å docker-compose.yml
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

## ‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω

### 1. Opcache –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
**–§–∞–π–ª—ã**: `core/Dockerfile`, `core/docker-entrypoint.sh`, `docker-compose.yml`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: Opcache –≤–∫–ª—é—á–µ–Ω –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω (256MB, 20000 —Ñ–∞–π–ª–æ–≤)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `ENABLE_OPCACHE=false` –≤ `.env`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 2. PHP-FPM –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
**–§–∞–π–ª—ã**: `core/Dockerfile`, `core/docker-entrypoint.sh`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –£–≤–µ–ª–∏—á–µ–Ω—ã –ª–∏–º–∏—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ PHP-FPM –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 3. Composer autoload –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω
**–§–∞–π–ª**: `core/composer.json`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è `autoload` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 4. Schema cache –≤–∫–ª—é—á–µ–Ω
**–§–∞–π–ª**: `core/config/db.php`
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω –∫–µ—à —Å—Ö–µ–º—ã –ë–î –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ `information_schema`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Docker
- ‚úÖ `core/Dockerfile` - Opcache –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚úÖ `core/docker-entrypoint.sh` - –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ opcache —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `docker-compose.yml` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ENABLE_OPCACHE`

### PHP
- ‚úÖ `core/composer.json` - –î–æ–±–∞–≤–ª–µ–Ω autoload, –æ–±–Ω–æ–≤–ª–µ–Ω HTMLPurifier
- ‚úÖ `core/config/db.php` - –ß—Ç–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, schema cache
- ‚úÖ `core/components/MysqlSchema.php` - –ù–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ MySQL 8.0
- ‚úÖ `core/behaviors/MaintenanceBehavior.php` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è URI

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `README.md` - –û–±–Ω–æ–≤–ª–µ–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚úÖ `PRODUCTION.md` - –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ—è
- ‚úÖ `.env.example` - –°–æ–∑–¥–∞–Ω –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `CHANGES.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ HTMLPurifier –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ v4.19.0 (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å PHP 8.1)
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- ‚úÖ –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è**: –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ `.env` –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç—Å—è**: –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ MySQL –ø–æ—Ä—Ç—É

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í–∫–ª—é—á–µ–Ω–æ
- ‚úÖ Opcache (256MB, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)
- ‚úÖ PHP-FPM –ø—É–ª —É–≤–µ–ª–∏—á–µ–Ω (20 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
- ‚úÖ Schema cache –≤–∫–ª—é—á–µ–Ω
- ‚úÖ Composer autoload –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏:
- PHP 8.1 FPM
- MySQL 8.0
- Docker Compose
- Ubuntu Server

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ–µ–º

- [x] –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] .env.example —Å–æ–∑–¥–∞–Ω
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ .env
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS (SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ staging –æ–∫—Ä—É–∂–µ–Ω–∏–∏

---

**–î–∞—Ç–∞**: –ù–æ—è–±—Ä—å 2025
**–í–µ—Ä—Å–∏—è**: 2024.12 (Production Ready)

