# –û—Ç—á—ë—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ cBackup

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-10-31

### 1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker ‚úì

- ‚úÖ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `24.0.7`
- ‚úÖ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `v2.23.3-desktop.2`
- ‚úÖ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
- ‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `.env` —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã ‚úì

- ‚úÖ `docker-compose.yml` - –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ `core/Dockerfile` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ `worker/Dockerfile` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (multi-stage build)
- ‚úÖ `nginx/default.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ `nginx/nginx.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

### 3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚úì

- ‚úÖ `core/composer.json` - JSON —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ `worker/pom.xml` - XML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ `core/config/db.php` - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `core/install/schema.sql` - –Ω–∞–π–¥–µ–Ω

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚úì

```
cbackup/
‚îú‚îÄ‚îÄ ‚úÖ docker-compose.yml
‚îú‚îÄ‚îÄ ‚úÖ core/
‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ composer.json
‚îÇ   ‚îî‚îÄ‚îÄ ‚úÖ install/schema.sql
‚îú‚îÄ‚îÄ ‚úÖ worker/
‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ ‚úÖ pom.xml
‚îú‚îÄ‚îÄ ‚úÖ nginx/
‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ nginx.conf
‚îÇ   ‚îî‚îÄ‚îÄ ‚úÖ default.conf
‚îî‚îÄ‚îÄ ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README.md, QUICKSTART.md, CHANGELOG.md)
```

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### 1. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª

```bash
cp .env.example .env
```

–ó–∞—Ç–µ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏.

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 80, 443 –∏ 3306 —Å–≤–æ–±–æ–¥–Ω—ã, –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∏—Ö –≤ `.env`:

```env
NGINX_PORT=8080
MYSQL_PORT=3307
```

### 3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω)
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ .env
nano .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs -f
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

1. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è MYSQL_ROOT_PASSWORD –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞**
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ—Ç `.env` —Ñ–∞–π–ª–∞
   - Docker Compose –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –†–µ—à–µ–Ω–∏–µ: —Å–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª —Å –ø–∞—Ä–æ–ª—è–º–∏

2. **PHP/Nginx –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ**
   - –≠—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –Ω–∞ —Ö–æ—Å—Ç–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í –ö –ó–ê–ü–£–°–ö–£**

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ `docker-compose up -d`.

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª —Å –ø–∞—Ä–æ–ª—è–º–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `docker-compose up -d`
3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞

## üìä –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### Docker Compose —Å–µ—Ä–≤–∏—Å—ã:

1. **db** (MySQL 8.0)
   - ‚úì –û–±—Ä–∞–∑: `mysql:8.0`
   - ‚úì Health check –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - ‚úì Volumes –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   - ‚úì –ü–æ—Ä—Ç: 3306

2. **web** (PHP 8.1-FPM)
   - ‚úì Dockerfile –Ω–∞–π–¥–µ–Ω
   - ‚úì Build context: `./core`
   - ‚úì –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: db (health check)

3. **nginx** (Nginx Alpine)
   - ‚úì –û–±—Ä–∞–∑: `nginx:alpine`
   - ‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `nginx/default.conf`
   - ‚úì –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: web

4. **worker** (Java Spring Boot)
   - ‚úì Dockerfile –Ω–∞–π–¥–µ–Ω (multi-stage build)
   - ‚úì Build context: `./worker`
   - ‚úì Java 11
   - ‚úì –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: db, web

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

- **PHP**: 8.1-FPM —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ (snmp, ssh2, gmp, –∏ –¥—Ä.)
- **Java**: 11 (Eclipse Temurin)
- **MySQL**: 8.0
- **Nginx**: Alpine (latest)

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–±—Ä–∞–Ω, –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∑–∞–ø—É—Å–∫—É –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.

**–í—Ä–µ–º—è –¥–æ –∑–∞–ø—É—Å–∫–∞:** ~5 –º–∏–Ω—É—Ç (—Å–æ–∑–¥–∞–Ω–∏–µ .env + docker-compose up)

